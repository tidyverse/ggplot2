---
title: "FAQ: Axes"
output: rmarkdown::html_vignette
description: |
  Customising axes and grid lines.
vignette: >
  %\VignetteIndexEntry{Axes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
library(ggplot2)
knitr::opts_chunk$set(
  fig.dpi = 96, 
  collapse = TRUE, 
  comment = "#>",
  fig.asp = 0.618,
  fig.width = 6)
```

## Label placement

### How can I rotate the axis tick labels in ggplot2 so that tick labels that are long character strings don't overlap?

We can do this by setting the angle of the text in the `axis.text.x` or `axis.text.y` components of the `theme()`, e.g. `theme(axis.text.x = element_text(angle = 90))`.

<br>

<details>
<summary>Details</summary>

In the following plot the 

```{r msleep-order-sleep-total}
ggplot(msleep, aes(x = order, y = sleep_total)) +
  geom_boxplot()
```

- Rotate axis labels: We can do this by components of the `theme()`, specifically the `axis.text.x` component. Applying some vertical and horizontal justification to the labels centers them at the axis ticks. The `angle` can be set as desired within the 0 to 360 degree range, here we set it to 90 degrees.

```{r msleep-order-sleep-total-rotate}
ggplot(msleep, aes(x = order, y = sleep_total)) +
  geom_boxplot() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
```

- Flip the axes: Use the y-axis for long labels.

```{r msleep-order-sleep-total-flip}
ggplot(msleep, aes(y = order, x = sleep_total)) +
  geom_boxplot()
```

- Dodge axis labels: Use the `guide_axis()` function, where `n.dodge` indicates the number of rows that should be used to render the labels.

```{r msleep-order-sleep-total-dodge}
ggplot(msleep, aes(x = order, y = sleep_total)) +
  geom_boxplot() +
  scale_x_discrete(guide = guide_axis(n.dodge = 2))
```

- Omit overlapping labels: Use the `guide_axis()` function, which prioritizes the first, last, and middle labels. Note that this option might be more preferable for axes representing variables that have an inherent ordering that is obvious to the audience of the plot, so that it's trivial to guess what the missing labels are. (This is not the case for the following plot.)

```{r msleep-order-sleep-total-check-overlap}
ggplot(msleep, aes(x = order, y = sleep_total)) +
  geom_boxplot() +
  scale_x_discrete(guide = guide_axis(check.overlap = TRUE))
```  
  
  </p>
</details>

### How can I remove axis labels in ggplot2?

<details>
  <summary>Example</summary>
  <p>
```{r ref.label="msleep-order-sleep-total"}
```
  </p>
</details>

<details>
  <summary>Answer</summary>
  <p>
  
- Remove all axis labels: You can use `theme_void()` to remove all theming elements. Note that this might remove more features than you like. For finer control over the theme, see below.

```{r}
ggplot(msleep, aes(x = order, y = sleep_total)) +
  geom_boxplot() + 
  theme_void()
```
  
- Remove x or y axis labels: If you want to modify just one of the axes, you can do so by modifying the components of the `theme()`, setting the elements you want to remove to `element_blank()`. You would replace `x` with `y` for applying the same update to the y-axis.

```{r}
ggplot(msleep, aes(x = order, y = sleep_total)) +
  geom_boxplot() +
  theme(
    axis.title.x = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )
```

  </p>
</details>


## Label formatting and customization

### How can I force R to stop using scientific notation on axis labels?

<details>
  <summary>Example</summary>
  <p>
```{r}
ggplot(txhousing, aes(x = median, y = volume)) +
  geom_point()
```
  </p>
</details>

<details>
  <summary>Answer</summary>
  <p>
  
The [scales](https://scales.r-lib.org/) package offers a large number of functions to control the formatting of axis labels and legend keys. 
Use `scales::label_number()` to force decimal display of numbers rather than using scientific notation or use `scales::label_comma()` to insert a comma every three digits.

```{r}
library(scales)
ggplot(txhousing, aes(x = median, y = volume)) +
  geom_point() +
  scale_x_continuous(labels = label_number()) +
  scale_y_continuous(labels = label_comma())
```

  </p>
</details>

### How can I force R to stop using scientific notation on axis labels?


### How can I customize the text shown on the axis labels?

<details>
  <summary>Example</summary>
  <p>
```{r}
ggplot(mpg, aes(y = drv)) +
  geom_bar()
```  
  </p>
</details>

<details>
  <summary>Answer</summary>
  <p>
  
Use the `label` argument in the appropriate `scale_*()` function. 
You can find a list of these functions [here](https://ggplot2.tidyverse.org/reference/index.html#section-scales). 
In this case we have a discrete variable in the y-axis, so we'll use `scale_y_discrete()`.

```{r}
ggplot(mpg, aes(y = drv)) +
  geom_bar() +
  scale_y_discrete(
    labels = c(
      "f" = "Front wheel drive",
      "r" = "Rear wheel drive",
      "4" = "Four wheel drive"
    )
  )
```  
  </p>
</details>


### How can I change the number of decimal places on axis labels?

<details>
  <summary>Example</summary>
  <p>
```{r}
ggplot(seals, aes(x = delta_long, y = delta_lat)) +
  geom_point()
```
  </p>
</details>

<details>
  <summary>Answer</summary>
  <p>
  
The [scales](https://scales.r-lib.org/) package offers a large number of functions to control the formatting of axis labels and legend keys. 
Use `scales::label_number()` where the `accuracy` argument indicates the number to round to, e.g. 0.1 to show 1 decimal place, 0.0001 to show 4 decimal places, etc.

```{r}
library(scales)
ggplot(seals, aes(x = delta_long, y = delta_lat)) +
  geom_point() +
  scale_x_continuous(labels = label_number(accuracy = 0.1)) +
  scale_y_continuous(labels = label_number(accuracy = 0.0001))
```

  </p>
</details>

### How can I add superscripts and subscripts to axis labels?

<details>
  <summary>Example</summary>
  <p>
```{r}
ggplot(mpg, aes(x = cty^2, y = log(hwy))) +
  geom_point()
```  
  </p>
</details>

<details>
  <summary>Answer</summary>
  <p>

Use `bquote()` function to parse mathematical expressions. 
  
```{r}
ggplot(mpg, aes(x = cty^2, y = log(hwy, base = 10))) +
  geom_point() +
  labs(
    x = bquote(cty^2),
    y = bquote(paste(log[10], "(hwy)"))
  )
```  
  </p>
</details>


## Custom breaks

### How can I customize 


-   formatting numbers (decimals, percentages, scientific notation)
-   subscript / supercript
-   multirow axis labels
-   rotating / spacing
-   remove all labels
-   major / minor gridlines
-   space between axis and plot
