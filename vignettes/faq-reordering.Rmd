---
title: "FAQ: Reordering"
output: rmarkdown::html_vignette
description: |
  Changing the order in which data are plotted or presented on a plot.
vignette: >
  %\VignetteIndexEntry{Reordering}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
library(ggplot2)
knitr::opts_chunk$set(fig.dpi = 96, collapse = TRUE, comment = "#>")
```

## Bar plots

### How can I reorder the bars in a bar plot by their value?

Change the order of the levels of the factor variable you're creating the bar plot for in the `aes`thetic `mapping`.
The forcats package offers a variety of options for doing this, such as `forcats::fct_reorder()`.

<details>

<summary>See example</summary>

The following bar plot shows the number of cars that fall into each `class` category.
Classes are ordered alphabetically.
You might prefer them to be ordered by the number of cars in each class.

```{r}
ggplot(mpg, aes(y = class)) +
  geom_bar()
```

To do this, you should first calculate the number of cars that fall into each `class` category.
One option for doing this is `dplyr::count()`.
Note that this results in a data frame with two columns: one for `class` and one for the number of cars in that category, `n`.

```{r}
mpg %>%
  dplyr::count(class)
```

You can pass the result directly into `ggplot()` and reorder the levels of `class` based on the value of `n`.
Then, use `geom_col()` instead of `geom_bar()` since you've already counted and mapped the counts (`n`) to the `x` axis on `aes()`.

```{r}
mpg %>%
  count(class) %>%
  ggplot(aes(y = forcats::fct_reorder(class, n), x = n)) +
  geom_col()
```

</details>

### How can I reorder the stacks in a stacked bar plot?

Change the order of the levels of the factor variable you're creating the stacks with in the `aes`thetic `mapping`.
The forcats package offers a variety of options for doing this, such as `forcats::fct_reorder()` to reorder the levels or `forcats::fct_rev()` to reverse their order.

<details>

<summary>See example</summary>

Suppose you have the following stacked bar plot of `clarity` of `diamonds` by their `cut`.

```{r}
ggplot(diamonds, aes(x = cut, fill = clarity)) +
  geom_bar()
```

You can revers the order `clarity` levels are displayed in the bars with `forcats::fct_rev()`.
This will also change the order they're presented in the legend so the two orders match.

```{r}
ggplot(diamonds, aes(x = cut, fill = forcats::fct_rev(clarity))) +
  geom_bar() +
  labs(fill = "clarity")
```

</details>

## Box plots

## Facets

### How can I control the order of panes created with `facet_wrap()` or `facet_grid()`?

Change the order of the levels of the factor variable you're faceting by.
The forcats package offers a variety of options for doing this, such as `forcats::fct_relevel()`.

<details>

<summary>

See example

</summary>

The order of the panes is determined by the order of the levels of the variable you're faceting by.
If the faceting variable is character, this order is alphabetical by default.

```{r}
ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  facet_wrap(~drv)
```

Suppose you'd like the panes to be in the order `"r"`, `"f"` , `"4"`.
You can use `forcats::fct_relevel()` to reorder the levels of `drv`.
You can do this in a data transformation step prior to plotting (e.g. with `dplyr::mutate()`) or you can do it directly in the plotting code as shown below.

```{r}
ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  facet_wrap(~forcats::fct_relevel(drv, "r", "f", "4"))
```

</details>

## Overplotting

-   overplotting / order of points
