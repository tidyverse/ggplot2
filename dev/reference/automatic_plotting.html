<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tailoring plots to particular data types — automatic_plotting • ggplot2</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tailoring plots to particular data types — automatic_plotting"><meta name="description" content="There are three functions to make plotting particular data types easier:
autoplot(), autolayer() and fortify(). These are S3 generics for which
other packages can write methods to display classes of data. The three
functions are complementary and allow different levels of customisation.
Below we'll explore implementing this series of methods to automate plotting
of some class.
Let's suppose we are writing a packages that has a class called 'my_heatmap',
that wraps a matrix and we'd like users to easily plot this heatmap.
my_heatmap &amp;lt;- function(...) {
  m &amp;lt;- matrix(...)
  class(m) &amp;lt;- c(&quot;my_heatmap&quot;, class(m))
  m
}

my_data &amp;lt;- my_heatmap(volcano)
"><meta property="og:description" content="There are three functions to make plotting particular data types easier:
autoplot(), autolayer() and fortify(). These are S3 generics for which
other packages can write methods to display classes of data. The three
functions are complementary and allow different levels of customisation.
Below we'll explore implementing this series of methods to automate plotting
of some class.
Let's suppose we are writing a packages that has a class called 'my_heatmap',
that wraps a matrix and we'd like users to easily plot this heatmap.
my_heatmap &amp;lt;- function(...) {
  m &amp;lt;- matrix(...)
  class(m) &amp;lt;- c(&quot;my_heatmap&quot;, class(m))
  m
}

my_data &amp;lt;- my_heatmap(volcano)
"><meta property="og:image" content="https://ggplot2.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="ggplot2.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggplot2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.5.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggplot2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">Version 3.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/">Version 3.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/">Version 3.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/06/ggplot2-3-2-0/">Version 3.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/10/ggplot2-3-1-0/">Version 3.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/">Version 3.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-2-0/">Version 2.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-1-0/">Version 2.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-0-0/">Version 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-updates/">Version 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ggplot2-specs.html">Aesthetic specifications</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer</h6></li>
    <li><a class="dropdown-item" href="../articles/extending-ggplot2.html">Extending ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/ggplot2-in-packages.html">Using ggplot2 in packages</a></li>
    <li><a class="dropdown-item" href="../articles/profiling.html">Profiling Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>FAQ</h6></li>
    <li><a class="dropdown-item" href="../articles/faq-axes.html">FAQ: Axes</a></li>
    <li><a class="dropdown-item" href="../articles/faq-faceting.html">FAQ: Faceting</a></li>
    <li><a class="dropdown-item" href="../articles/faq-customising.html">FAQ: Customising</a></li>
    <li><a class="dropdown-item" href="../articles/faq-annotation.html">FAQ: Annotation</a></li>
    <li><a class="dropdown-item" href="../articles/faq-reordering.html">FAQ: Reordering</a></li>
    <li><a class="dropdown-item" href="../articles/faq-bars.html">FAQ: Barplots</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://exts.ggplot2.tidyverse.org/gallery/">Extensions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/ggplot2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tailoring plots to particular data types</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/ggplot2/blob/main/R/autoplot.R" class="external-link"><code>R/autoplot.R</code></a></small>
      <div class="d-none name"><code>automatic_plotting.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>There are three functions to make plotting particular data types easier:
<code><a href="autoplot.html">autoplot()</a></code>, <code><a href="autolayer.html">autolayer()</a></code> and <code><a href="fortify.html">fortify()</a></code>. These are S3 generics for which
other packages can write methods to display classes of data. The three
functions are complementary and allow different levels of customisation.
Below we'll explore implementing this series of methods to automate plotting
of some class.</p>
<p>Let's suppose we are writing a packages that has a class called 'my_heatmap',
that wraps a matrix and we'd like users to easily plot this heatmap.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">my_heatmap</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"my_heatmap"</span>, <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">m</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu">my_heatmap</span><span class="op">(</span><span class="va">volcano</span><span class="op">)</span></span></code></pre><p></p></div>
    </div>


    <div class="section level2">
    <h2 id="automatic-data-shaping">Automatic data shaping<a class="anchor" aria-label="anchor" href="#automatic-data-shaping"></a></h2>
    <p>One of the things we have to do is ensure that the data is shaped in the long
format so that it is compatible with ggplot2. This is the job of the
<code><a href="fortify.html">fortify()</a></code> function. Because 'my_heatmap' wraps a matrix, we can let the
fortify method 'melt' the matrix to a long format. If your data is already
based on a long-format <code>&lt;data.frame&gt;</code>, you can skip implementing a
<code><a href="fortify.html">fortify()</a></code> method.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">fortify.my_heatmap</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">model</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    row <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/row.html" class="external-link">row</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/col.html" class="external-link">col</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="../reference/fortify.html">fortify</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span></code></pre><p></p></div>
<p>When you have implemented the <code><a href="fortify.html">fortify()</a></code> method, it should be easier to
construct a plot with the data than with the matrix.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="fu"><a href="../reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">col</span>, y <span class="op">=</span> <span class="va">row</span>, fill <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_tile.html">geom_raster</a></span><span class="op">(</span><span class="op">)</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="automatic-layers">Automatic layers<a class="anchor" aria-label="anchor" href="#automatic-layers"></a></h2>
    <p>A next step in automating plotting of your data type is to write an
<code><a href="autolayer.html">autolayer()</a></code> method. These are typically wrappers around geoms or stats
that automatically set aesthetics or other parameters. If you haven't
implemented a <code><a href="fortify.html">fortify()</a></code> method for your data type, you might have to
reshape the data in <code><a href="autolayer.html">autolayer()</a></code>.</p>
<p>If you require multiple layers to display your data type, you can use an
<code><a href="autolayer.html">autolayer()</a></code> method that constructs a list of layers, which can be added
to a plot.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">autolayer.my_heatmap</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/geom_tile.html">geom_raster</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="../reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">col</span>, y <span class="op">=</span> <span class="va">row</span>, fill <span class="op">=</span> <span class="va">value</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">object</span>,</span>
<span>    <span class="va">...</span>,</span>
<span>    inherit.aes <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/autolayer.html">autolayer</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span></code></pre><p></p></div>
<p>As a quick tip: if you define a mapping in <code><a href="autolayer.html">autolayer()</a></code>, you might want
to set <code>inherit.aes = FALSE</code> to not have aesthetics set in other layers
interfere with your layer.</p>
    </div>
    <div class="section level2">
    <h2 id="automatic-plots">Automatic plots<a class="anchor" aria-label="anchor" href="#automatic-plots"></a></h2>
    <p>The last step in automating plotting is to write an <code><a href="autoplot.html">autoplot()</a></code> method
for your data type. The expectation is that these return a complete plot.
In the example below, we're exploiting the <code><a href="autolayer.html">autolayer()</a></code> method that we
have already written to make a complete plot.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">autoplot.my_heatmap</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span>, <span class="va">option</span> <span class="op">=</span> <span class="st">"magma"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/autolayer.html">autolayer</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/scale_viridis.html">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="va">option</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="../reference/autoplot.html">autoplot</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span></code></pre><p></p></div>
<p>If you don't have a wish to implement a base R plotting method, you
can set the plot method for your class to the autoplot method.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">plot.my_heatmap</span> <span class="op">&lt;-</span> <span class="va">autoplot.my_heatmap</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other plotting automation topics:
<code><a href="autolayer.html">autolayer</a>()</code>,
<code><a href="autoplot.html">autoplot</a>()</code>,
<code><a href="fortify.html">fortify</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/wch" class="external-link">Winston Chang</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, Kohske Takahashi, <a href="https://clauswilke.com" class="external-link">Claus Wilke</a>, <a href="https://karawoo.com" class="external-link">Kara Woo</a>, <a href="https://yutani.rbind.io" class="external-link">Hiroaki Yutani</a>, <a href="https://fishandwhistle.net" class="external-link">Dewey Dunnington</a>, Teun van den Brand, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

