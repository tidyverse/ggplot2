<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Utilities for working with bidirectional layers — bidirection • ggplot2</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Utilities for working with bidirectional layers — bidirection"><meta name="description" content="These functions are what underpins the ability of certain geoms to work
automatically in both directions. See the Extending ggplot2 vignette for
how they are used when implementing Geom, Stat, and Position classes."><meta property="og:description" content="These functions are what underpins the ability of certain geoms to work
automatically in both directions. See the Extending ggplot2 vignette for
how they are used when implementing Geom, Stat, and Position classes."><meta property="og:image" content="https://ggplot2.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-hide-below="1200" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="ggplot2.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script><script async src="https://widget.kapa.ai/kapa-widget.bundle.js" data-button-hide="true" data-modal-disclaimer="This is a custom LLM for answering questions about dplyr, tidyr, and ggplot2. Answers are based on the contents of the documentation. Rate the answers to let us know what you think!" data-modal-ask-ai-input-placeholder="Ask me a question about dplyr, tidyr, or ggplot2." data-modal-header-bg-color="#f9f9f9" data-modal-override-open-class="open-kapa-widget" data-project-color="#365a7a" data-project-name="ggplot2" data-modal-title="tidyverse AI ✨" data-project-logo="https://avatars.githubusercontent.com/u/22032646?s=200&amp;u=235532df5cf8543246812f73db051b793f868807&amp;v=4" data-user-analytics-fingerprint-enabled="true" data-bot-protection-mechanism="hcaptcha" data-website-id="5dcac24a-bd5a-4874-9f5b-3341afddd8c3"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggplot2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">4.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggplot2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/09/ggplot2-4-0-0/">Version 4.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">Version 3.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/">Version 3.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/">Version 3.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/06/ggplot2-3-2-0/">Version 3.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/10/ggplot2-3-1-0/">Version 3.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/">Version 3.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-2-0/">Version 2.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-1-0/">Version 2.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-0-0/">Version 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-updates/">Version 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ggplot2-specs.html">Aesthetic specifications</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer</h6></li>
    <li><a class="dropdown-item" href="../articles/extending-ggplot2.html">Extending ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/ggplot2-in-packages.html">Using ggplot2 in packages</a></li>
    <li><a class="dropdown-item" href="../articles/profiling.html">Profiling Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>FAQ</h6></li>
    <li><a class="dropdown-item" href="../articles/faq-axes.html">FAQ: Axes</a></li>
    <li><a class="dropdown-item" href="../articles/faq-faceting.html">FAQ: Faceting</a></li>
    <li><a class="dropdown-item" href="../articles/faq-customising.html">FAQ: Customising</a></li>
    <li><a class="dropdown-item" href="../articles/faq-annotation.html">FAQ: Annotation</a></li>
    <li><a class="dropdown-item" href="../articles/faq-reordering.html">FAQ: Reordering</a></li>
    <li><a class="dropdown-item" href="../articles/faq-bars.html">FAQ: Barplots</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://exts.ggplot2.tidyverse.org/gallery/" aria-label="Extensions"><span class="fa fa-puzzle-piece"></span></a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/ggplot2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link open-kapa-widget" href="../#">Ask AI ✨</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Utilities for working with bidirectional layers</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/ggplot2/blob/main/R/utilities.R" class="external-link"><code>R/utilities.R</code></a></small>
      <div class="d-none name"><code>bidirection.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions are what underpins the ability of certain geoms to work
automatically in both directions. See the <em>Extending ggplot2</em> vignette for
how they are used when implementing <code>Geom</code>, <code>Stat</code>, and <code>Position</code> classes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">has_flipped_aes</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  main_is_orthogonal <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  range_is_orthogonal <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  group_has_equal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ambiguous <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  main_is_continuous <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  main_is_optional <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  default <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">flip_data</span><span class="op">(</span><span class="va">data</span>, flip <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">flipped_names</span><span class="op">(</span>flip <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The layer data</p></dd>


<dt id="arg-params">params<a class="anchor" aria-label="anchor" href="#arg-params"></a></dt>
<dd><p>The parameters of the <code>Stat</code>/<code>Geom</code>. Only the <code>orientation</code>
parameter will be used.</p></dd>


<dt id="arg-main-is-orthogonal">main_is_orthogonal<a class="anchor" aria-label="anchor" href="#arg-main-is-orthogonal"></a></dt>
<dd><p>If only <code>x</code> or <code>y</code> are present do they correspond
to the main orientation or the reverse. E.g. If <code>TRUE</code> and <code>y</code> is present
it is not flipped. If <code>NA</code> this check will be ignored.</p></dd>


<dt id="arg-range-is-orthogonal">range_is_orthogonal<a class="anchor" aria-label="anchor" href="#arg-range-is-orthogonal"></a></dt>
<dd><p>If <code>xmin</code>/<code>xmax</code> or <code>ymin</code>/<code>ymax</code> is present do
they correspond to the main orientation or reverse. If <code>NA</code> this check will
be ignored.</p></dd>


<dt id="arg-group-has-equal">group_has_equal<a class="anchor" aria-label="anchor" href="#arg-group-has-equal"></a></dt>
<dd><p>Is it expected that grouped data has either a single
<code>x</code> or <code>y</code> value that will correspond to the orientation.</p></dd>


<dt id="arg-ambiguous">ambiguous<a class="anchor" aria-label="anchor" href="#arg-ambiguous"></a></dt>
<dd><p>Is the layer ambiguous in its mapping by nature. If so, it
will only be flipped if <code>params$orientation == "y"</code></p></dd>


<dt id="arg-main-is-continuous">main_is_continuous<a class="anchor" aria-label="anchor" href="#arg-main-is-continuous"></a></dt>
<dd><p>If there is a discrete and continuous axis, does
the continuous one correspond to the main orientation?</p></dd>


<dt id="arg-main-is-optional">main_is_optional<a class="anchor" aria-label="anchor" href="#arg-main-is-optional"></a></dt>
<dd><p>Is the main axis aesthetic optional and, if not
given, set to <code>0</code></p></dd>


<dt id="arg-default">default<a class="anchor" aria-label="anchor" href="#arg-default"></a></dt>
<dd><p>The logical value to return if no orientation can be discerned
from the data.</p></dd>


<dt id="arg-flip">flip<a class="anchor" aria-label="anchor" href="#arg-flip"></a></dt>
<dd><p>Logical. Is the layer flipped.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>has_flipped_aes()</code> returns <code>TRUE</code> if it detects a layer in the other
orientation and <code>FALSE</code> otherwise. <code>flip_data()</code> will return the input
unchanged if <code>flip = FALSE</code> and the data with flipped aesthetic names if
<code>flip = TRUE</code>. <code>flipped_names()</code> returns a named list of strings. If
<code>flip = FALSE</code> the name of the element will correspond to the element, e.g.
<code>flipped_names(FALSE)$x == "x"</code> and if <code>flip = TRUE</code> it will correspond to
the flipped name, e.g. <code>flipped_names(FALSE)$x == "y"</code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>has_flipped_aes()</code> is used to sniff out the orientation of the layer from
the data. It has a range of arguments that can be used to finetune the
sniffing based on what the data should look like. <code>flip_data()</code> will switch
the column names of the data so that it looks like x-oriented data.
<code>flipped_names()</code> provides a named list of aesthetic names that corresponds
to the orientation of the layer.</p>
    </div>
    <div class="section level2">
    <h2 id="controlling-the-sniffing">Controlling the sniffing<a class="anchor" aria-label="anchor" href="#controlling-the-sniffing"></a></h2>


<p>How the layer data should be interpreted depends on its specific features.
<code>has_flipped_aes()</code> contains a range of flags for defining what certain
features in the data correspond to:</p><ul><li><p><code>main_is_orthogonal</code>: This argument controls how the existence of only a <code>x</code>
or <code>y</code> aesthetic is understood. If <code>TRUE</code> then the existing aesthetic
would be then secondary axis. This behaviour is present in <code><a href="geom_violin.html">stat_ydensity()</a></code>
and <code><a href="geom_boxplot.html">stat_boxplot()</a></code>. If <code>FALSE</code> then the existing aesthetic is the main
axis as seen in e.g. <code><a href="geom_histogram.html">stat_bin()</a></code>, <code><a href="geom_count.html">geom_count()</a></code>, and <code><a href="geom_density.html">stat_density()</a></code>.</p></li>
<li><p><code>range_is_orthogonal</code>: This argument controls whether the existence of
range-like aesthetics (e.g. <code>xmin</code> and <code>xmax</code>) represents the main or
secondary axis. If <code>TRUE</code> then the range is given for the secondary axis as
seen in e.g. <code><a href="geom_ribbon.html">geom_ribbon()</a></code> and <code><a href="geom_linerange.html">geom_linerange()</a></code>.</p></li>
<li><p><code>group_has_equal</code>: This argument controls whether to test for equality of
all <code>x</code> and <code>y</code> values inside each group and set the main axis to the one
where all is equal. This test is only performed if <code>TRUE</code>, and only after
less computationally heavy tests has come up empty handed. Examples are
<code><a href="geom_boxplot.html">stat_boxplot()</a></code> and <a href="geom_violin.html">stat_ydensity</a></p></li>
<li><p><code>ambiguous</code>: This argument tells the function that the layer, while
bidirectional, doesn't treat each axis differently. It will circumvent any
data based guessing and only take hint from the <code>orientation</code> element in
<code>params</code>. If this is not present it will fall back to <code>FALSE</code>. Examples are
<code><a href="geom_path.html">geom_line()</a></code> and <code><a href="geom_ribbon.html">geom_area()</a></code></p></li>
<li><p><code>main_is_continuous</code>: This argument controls how the test for discreteness
in the scales should be interpreted. If <code>TRUE</code> then the main axis will be
the one which is not discrete-like. Conversely, if <code>FALSE</code> the main axis
will be the discrete-like one. Examples of <code>TRUE</code> is <code><a href="geom_density.html">stat_density()</a></code> and
<code><a href="geom_histogram.html">stat_bin()</a></code>, while examples of <code>FALSE</code> is <code><a href="geom_violin.html">stat_ydensity()</a></code> and
<code><a href="geom_boxplot.html">stat_boxplot()</a></code></p></li>
<li><p><code>main_is_optional</code>: This argument controls the rare case of layers were the
main direction is an optional aesthetic. This is only seen in
<code><a href="geom_boxplot.html">stat_boxplot()</a></code> where <code>x</code> is set to <code>0</code> if not given. If <code>TRUE</code> there will
be a check for whether all <code>x</code> or all <code>y</code> are equal to <code>0</code></p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/wch" class="external-link">Winston Chang</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, Kohske Takahashi, <a href="https://clauswilke.com" class="external-link">Claus Wilke</a>, <a href="https://karawoo.com" class="external-link">Kara Woo</a>, <a href="https://yutani.rbind.io" class="external-link">Hiroaki Yutani</a>, <a href="https://fishandwhistle.net" class="external-link">Dewey Dunnington</a>, Teun van den Brand, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

