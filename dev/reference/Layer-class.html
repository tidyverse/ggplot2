<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Layers — Layer-class • ggplot2</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Layers — Layer-class"><meta name="description" content="The Layer class is a chaperone class not available for extension. The class
fulfils the following tasks. The class houses the Geom, Stat and Position
trinity and tracks their stateful parameters. Furthermore, its methods are
responsible for managing the layer data and exposing it to other components
of the plot at the right time."><meta property="og:description" content="The Layer class is a chaperone class not available for extension. The class
fulfils the following tasks. The class houses the Geom, Stat and Position
trinity and tracks their stateful parameters. Furthermore, its methods are
responsible for managing the layer data and exposing it to other components
of the plot at the right time."><meta property="og:image" content="https://ggplot2.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-hide-below="1200" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="ggplot2.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script><script async src="https://widget.kapa.ai/kapa-widget.bundle.js" data-button-hide="true" data-modal-disclaimer="This is a custom LLM for answering questions about dplyr, tidyr, and ggplot2. Answers are based on the contents of the documentation. Rate the answers to let us know what you think!" data-modal-ask-ai-input-placeholder="Ask me a question about dplyr, tidyr, or ggplot2." data-modal-header-bg-color="#f9f9f9" data-modal-override-open-class="open-kapa-widget" data-project-color="#365a7a" data-project-name="ggplot2" data-modal-title="tidyverse AI ✨" data-project-logo="https://avatars.githubusercontent.com/u/22032646?s=200&amp;u=235532df5cf8543246812f73db051b793f868807&amp;v=4" data-user-analytics-fingerprint-enabled="true" data-bot-protection-mechanism="hcaptcha" data-website-id="5dcac24a-bd5a-4874-9f5b-3341afddd8c3"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggplot2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">4.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggplot2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/09/ggplot2-4-0-0/">Version 4.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">Version 3.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/">Version 3.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/">Version 3.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/06/ggplot2-3-2-0/">Version 3.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/10/ggplot2-3-1-0/">Version 3.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/">Version 3.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-2-0/">Version 2.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-1-0/">Version 2.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-0-0/">Version 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-updates/">Version 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ggplot2-specs.html">Aesthetic specifications</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer</h6></li>
    <li><a class="dropdown-item" href="../articles/extending-ggplot2.html">Extending ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/ggplot2-in-packages.html">Using ggplot2 in packages</a></li>
    <li><a class="dropdown-item" href="../articles/profiling.html">Profiling Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>FAQ</h6></li>
    <li><a class="dropdown-item" href="../articles/faq-axes.html">FAQ: Axes</a></li>
    <li><a class="dropdown-item" href="../articles/faq-faceting.html">FAQ: Faceting</a></li>
    <li><a class="dropdown-item" href="../articles/faq-customising.html">FAQ: Customising</a></li>
    <li><a class="dropdown-item" href="../articles/faq-annotation.html">FAQ: Annotation</a></li>
    <li><a class="dropdown-item" href="../articles/faq-reordering.html">FAQ: Reordering</a></li>
    <li><a class="dropdown-item" href="../articles/faq-bars.html">FAQ: Barplots</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://exts.ggplot2.tidyverse.org/gallery/" aria-label="Extensions"><span class="fa fa-puzzle-piece"></span></a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/ggplot2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link open-kapa-widget" href="../#">Ask AI ✨</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Layers</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/ggplot2/blob/main/R/layer.R" class="external-link"><code>R/layer.R</code></a></small>
      <div class="d-none name"><code>Layer-class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The Layer class is a chaperone class not available for extension. The class
fulfils the following tasks. The class houses the Geom, Stat and Position
trinity and tracks their stateful parameters. Furthermore, its methods are
responsible for managing the layer data and exposing it to other components
of the plot at the right time.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The Layer class is an internal class that is not exported because the class
is not intended for extension. The <code><a href="layer.html">layer()</a></code> function instantiates the
LayerInstance class, which inherits from Layer, but has relevant fields
populated.</p>
<p>The class is mostly used in <code><a href="ggplot_build.html">ggplot_build()</a></code>, with the notable exception
of the <code>draw_geom()</code> method, which is used in <code><a href="ggplot_gtable.html">ggplot_gtable()</a></code> instead.</p>
    </div>
    <div class="section level2">
    <h2 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a></h2>


<dl><dt><code>constructor</code></dt>
<dd><p>A <a href="https://rdrr.io/r/base/call.html" class="external-link">call</a> object with the user-facing
constructor function, for use in error messaging. This field is populated
by <code><a href="layer.html">layer()</a></code>.</p></dd>


<dt><code>geom,stat,position</code></dt>
<dd><p>These fields house the Geom, Stat and Position
trifecta in ggproto form and is populated by <code><a href="layer.html">layer()</a></code>.</p></dd>


<dt><code>stat_params,computed_stat_params</code></dt>
<dd><p>These fields hold parameters
assigned to the Stat. The <code>stat_params</code> field is directly derived from
user input and is populated by <code><a href="layer.html">layer()</a></code>. The <code>computed_stat_params</code>
carries state and is constructed by the <code>Stat$setup_params()</code> method.</p></dd>


<dt><code>geom_params,computed_geom_params</code></dt>
<dd><p>These fields hold parameters
assigned to the Geom. The <code>geom_params</code> field is directly derived from
user input and is populated by <code><a href="layer.html">layer()</a></code>. The <code>computed_geom_params</code>
carries state and is constructed by the <code>Geom$setup_params()</code> method.</p></dd>


<dt><code>mapping,computed_mapping</code></dt>
<dd><p>These fields hold <a href="aes.html">mapping</a>s.
The <code>mapping</code> field holds the <code>layer(mapping)</code> argument. The
<code>computed_mapping</code> field carries state and is constructed in the
<code>setup_layer()</code> method.</p></dd>


<dt><code>data</code></dt>
<dd><p>The fortified <code>layer(data)</code> argument.</p></dd>


<dt><code>aes_params</code></dt>
<dd><p>Holds the fixed, unmapped aesthetics passed to
<code>layer(params)</code> as determined by <code>Geom$aesthetics()</code>.</p></dd>


<dt><code>inherit.aes</code></dt>
<dd><p>A scalar boolean used in the <code>setup_layer()</code> method to
indicate whether the <code>computed_mapping</code> should include the global mapping
(<code>TRUE</code>) or only the layer mapping (<code>FALSE</code>). This is populated by the
<code>layer(inherit.aes)</code> parameter.</p></dd>


<dt><code>layer_data</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method for initially resolving layer data. If layer data is
missing or is a function, it will derive layer data from the global plot
data.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">layer_data</span><span class="op">(</span><span class="va">plot_data</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>plot_data</code></dt>
<dd><p>The <code>data</code> field of the ggplot object.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data or <code>NULL</code></p></dd>


<dt><code>setup_layer</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method is a hook to allow a final access to layer data in
input form. In addition, it allows a layer access to global plot
information. The latter is used to enforce the <code>inherit.aes</code> parameter by
supplementing the layer mapping with the global mapping when requested.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">setup_data</span><span class="op">(</span><span class="va">data</span>, <span class="va">plot</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>

<dt><code>plot</code></dt>
<dd><p>A ggplot object</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data. As a side effect, the <code>computed_mapping</code>
field is populated.</p></dd>


<dt><code>compute_aesthetics</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that evaluates aesthetics and warns about any problems.
It also infers a <code>group</code> aesthetic if not provided. This method is also
the step where layer data becomes standardised to base data frames without
row names or additional attributes.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">compute_aesthetics</span><span class="op">(</span><span class="va">data</span>, <span class="va">plot</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>

<dt><code>plot</code></dt>
<dd><p>A ggplot object</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data</p></dd>


<dt><code>compute_aesthetics</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that orchestrates computing statistics. It executes
methods from the Stat class to form new computed variables.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">compute_statistic</span><span class="op">(</span><span class="va">data</span>, <span class="va">layout</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>

<dt><code>layout</code></dt>
<dd><p>A <code>&lt;Layout&gt;</code> ggproto object.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data. As a side effect the <code>computed_stat_params</code>
field is populated.</p></dd>


<dt><code>map_statistic</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that finishes the result of computed statistics. It has
several tasks:</p><ul><li><p>It evaluates the <code><a href="aes_eval.html">after_stat()</a></code> stage of the mapping from both the
<code>computed_mapping</code> but also the <code>Stat$default_aes</code> fields.</p></li>
<li><p>It ensures relevant scales are instantiated for computed aesthetics.</p></li>
<li><p>It takes care that scale transformation is applied to computed aesthetics.</p></li>
</ul><p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">map_statistic</span><span class="op">(</span><span class="va">data</span>, <span class="va">plot</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>

<dt><code>plot</code></dt>
<dd><p>A ggplot object.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data</p></dd>


<dt><code>compute_geom_1</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that prepares data for drawing. It checks that all
required aesthetics are present and sets up parameters and data using the
Geom class.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">compute_geom_1</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data. As a side effect the <code>computed_geom_params</code>
field is populated.</p></dd>


<dt><code>compute_position</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that orchestrates the position adjustment. It executes
methods from the Position class.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">compute_position</span><span class="op">(</span><span class="va">data</span>, <span class="va">layout</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>

<dt><code>layout</code></dt>
<dd><p>A <code>&lt;Layout&gt;</code> ggproto object.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data.</p></dd>


<dt><code>compute_geom_2</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that add defaults and fixed parameters. It wraps the
<code>Geom$use_defaults()</code> method.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">compute_geom_2</span><span class="op">(</span><span class="va">data</span>, <span class="va">params</span>, <span class="va">theme</span>, <span class="va">...</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>

<dt><code>params</code></dt>
<dd><p>A list with fixed aesthetic parameters, typically the
<code>aes_params</code> field.</p></dd>

<dt><code>theme</code></dt>
<dd><p>A <a href="theme.html">theme</a> object</p></dd>

<dt><code>...</code></dt>
<dd><p>Passed on to <code>Geom$use_defaults()</code>, not in use.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data.</p></dd>


<dt><code>finish_statistics</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that wraps <code>Stat$finish_layer()</code>.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">finish_statistics</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A data frame with layer data.</p></dd>


<dt><code>draw_geom</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that produces graphics for every panel. It uses Geom
class methods to handle missing data and produce grobs. In contrast to
other methods, this is called during the <code><a href="ggplot_gtable.html">ggplot_gtable()</a></code> stage, not the
<code><a href="ggplot_build.html">ggplot_build()</a></code> stage.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">draw_geom</span><span class="op">(</span><span class="va">data</span>, <span class="va">layout</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Arguments</strong></p><dl><dt><code>data</code></dt>
<dd><p>A data frame with the layer's data.</p></dd>

<dt><code>layout</code></dt>
<dd><p>A <code>&lt;Layout&gt;</code> ggproto object.</p></dd>


</dl><p><strong>Value</strong></p>
<p>A list of grobs, one per panel.</p></dd>


<dt><code>print</code></dt>
<dd><p><strong>Description</strong></p>
<p>A function method that prints information about the layer.</p>
<p><strong>Usage</strong></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">Layer</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre><p></p></div>
<p><strong>Value</strong></p>
<p>Nothing (<code>NULL</code>), invisibly</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="layer-data-diagram">Layer data diagram<a class="anchor" aria-label="anchor" href="#layer-data-diagram"></a></h2>



<p>As the Layer class is a chaparone for the data, it makes sense to give a
small overview of how layer data flows through a plot. In the diagram below
we following the <code>layer(data)</code> argument over the course of plot building
through Layer class methods. When an outside class acts on the data without
the Layer class, this is indicated with the left arrow <code>&lt;-</code>. Subcomponents
of a method that touch data are indicated with the right arrow <code>-&gt;</code>.</p>
<p></p><div class="sourceCode r"><pre><code># Inside `ggplot_build()`
 |
layer(data)
 |
 |
 | # Inherit plot data
 |
Layer$layer_data()
 |
 |
 | # Finalise mapping
 |
Layer$setup_layer()
 |
 |
 | # Append PANEL variable for facets
 |
 |&lt;- Layout$setup()
 |    |
 |    +-&gt; Facet$setup_data()
 |    |
 |    +-&gt; Coord$setup_data()
 |
 |
 | # Evaluate mappings to new data and infer group
 |
Layer$compute_aesthetics()
 |
 |
 | # Scale-transform all aesthetics
 |
 |&lt;- ScalesList$transform_df()
 |    |
 |    +-&gt; Scale$transform_df()
 |
 |
 | # Map x/y aesthetics with initial scale
 |
 |&lt;- Layout$map_position()
 |    |
 |    +-&gt; Scale$map()
 |
 |
 | # Compute stat part of layer
 |
Layer$compute_statistic()
 | |
 | +-&gt; Stat$setup_data()
 | |
 | +-&gt; Stat$compute_layer()
 |
 |
 | # Add `after_stat()` stage
 | # Scale transform computed variables
 |
Layer$map_statistic()
 |
 |
 | # Setup geom part of layer
 |
Layer$compute_geom_1()
 | |
 | +-&gt; Geom$setup_data()
 |
 |
 | # Apply position adjustments
 |
Layer$compute_position()
 | |
 | +-&gt; Position$use_defaults()
 | |
 | +-&gt; Position$setup_data()
 | |
 | +-&gt; Position$compute_layer()
 |
 |
 | # Map x/y aesthetics with final scales
 |
 |&lt;- Layout$map_position()
 |    |
 |    +-&gt; Scale$map()
 |
 | # Map non-position aesthetics
 |
 |&lt;- ScalesList$map_df()
 |    |
 |    +-&gt; Scale$map()
 |
 |
 | # Fill in defaults and fixed aesthetics
 |
Layer$compute_geom_2()
 | |
 | +-&gt; Geom$use_defaults()
 |
 |
 | # Apply final Stat hook
 |
Layer$finish_statistics()
 | |
 | +-&gt; Stat$finish_layer()
 |
 |
 | # Apply final Facet hook
 |
 |&lt;- Layout$finish_data()
 |    |
 |    +-&gt; Facet$finish_data()
 |
 V
# `ggplot_build()` is finished
# Hand off to `ggplot_gtable()`
 |
 |
 | # Draw the geom part
 |
Layer$draw_geom()
 |
 +-&gt; Geom$handle_na()
 |
 +-&gt; Geom$draw_layer()
</code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Layer components:
<code><a href="Geom.html">Geom</a></code>,
<code><a href="Position.html">Position</a></code>,
<code><a href="Stat.html">Stat</a></code></p>
<p>Other chaperone classes:
<code><a href="Layout.html">Layout</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># None: Layer is not intended to be extended</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/wch" class="external-link">Winston Chang</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, Kohske Takahashi, <a href="https://clauswilke.com" class="external-link">Claus Wilke</a>, <a href="https://karawoo.com" class="external-link">Kara Woo</a>, <a href="https://yutani.rbind.io" class="external-link">Hiroaki Yutani</a>, <a href="https://fishandwhistle.net" class="external-link">Dewey Dunnington</a>, Teun van den Brand, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

