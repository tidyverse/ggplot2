<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check graphics device capabilities — check_device • ggplot2</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check graphics device capabilities — check_device"><meta name="description" content="This function makes an attempt to estimate whether the graphics device is
able to render newer graphics features."><meta property="og:description" content="This function makes an attempt to estimate whether the graphics device is
able to render newer graphics features."><meta property="og:image" content="https://ggplot2.tidyverse.org/logo.png"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-hide-below="1200" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="ggplot2.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script><script async src="https://widget.kapa.ai/kapa-widget.bundle.js" data-button-hide="true" data-modal-disclaimer="This is a custom LLM for answering questions about dplyr, tidyr, and ggplot2. Answers are based on the contents of the documentation. Rate the answers to let us know what you think!" data-modal-ask-ai-input-placeholder="Ask me a question about dplyr, tidyr, or ggplot2." data-modal-header-bg-color="#f9f9f9" data-modal-override-open-class="open-kapa-widget" data-project-color="#365a7a" data-project-name="ggplot2" data-modal-title="tidyverse AI ✨" data-project-logo="https://avatars.githubusercontent.com/u/22032646?s=200&amp;u=235532df5cf8543246812f73db051b793f868807&amp;v=4" data-user-analytics-fingerprint-enabled="true" data-bot-protection-mechanism="hcaptcha" data-website-id="5dcac24a-bd5a-4874-9f5b-3341afddd8c3"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggplot2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">4.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggplot2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">Version 3.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/">Version 3.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/">Version 3.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/06/ggplot2-3-2-0/">Version 3.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/10/ggplot2-3-1-0/">Version 3.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/">Version 3.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-2-0/">Version 2.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-1-0/">Version 2.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-2-0-0/">Version 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/ggplot2-updates/">Version 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ggplot2-specs.html">Aesthetic specifications</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer</h6></li>
    <li><a class="dropdown-item" href="../articles/extending-ggplot2.html">Extending ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/ggplot2-in-packages.html">Using ggplot2 in packages</a></li>
    <li><a class="dropdown-item" href="../articles/profiling.html">Profiling Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>FAQ</h6></li>
    <li><a class="dropdown-item" href="../articles/faq-axes.html">FAQ: Axes</a></li>
    <li><a class="dropdown-item" href="../articles/faq-faceting.html">FAQ: Faceting</a></li>
    <li><a class="dropdown-item" href="../articles/faq-customising.html">FAQ: Customising</a></li>
    <li><a class="dropdown-item" href="../articles/faq-annotation.html">FAQ: Annotation</a></li>
    <li><a class="dropdown-item" href="../articles/faq-reordering.html">FAQ: Reordering</a></li>
    <li><a class="dropdown-item" href="../articles/faq-bars.html">FAQ: Barplots</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://exts.ggplot2.tidyverse.org/gallery/" aria-label="Extensions"><span class="fa fa-puzzle-piece"></span></a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/ggplot2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link open-kapa-widget" href="../#">Ask AI ✨</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Check graphics device capabilities</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/ggplot2/blob/pkgdown-badge-display/R/utilities-checks.R" class="external-link"><code>R/utilities-checks.R</code></a></small>
      <div class="d-none name"><code>check_device.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function makes an attempt to estimate whether the graphics device is
able to render newer graphics features.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_device</span><span class="op">(</span></span>
<span>  <span class="va">feature</span>,</span>
<span>  action <span class="op">=</span> <span class="st">"warn"</span>,</span>
<span>  op <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  maybe <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  call <span class="op">=</span> <span class="fu">caller_env</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>A string naming a graphics device feature. One of:
<code>"clippingPaths"</code>, <code>"alpha_masks"</code>, <code>"lumi_masks"</code>, <code>"compositing"</code>,
<code>"blending"</code>, <code>"transformations"</code>, <code>"gradients"</code>, <code>"patterns"</code>, <code>"paths"</code>
or <code>"glyphs"</code>. See the 'Features' section below for an explanation
of these terms.</p></dd>


<dt id="arg-action">action<a class="anchor" aria-label="anchor" href="#arg-action"></a></dt>
<dd><p>A string for what action to take. One of:</p><ul><li><p><code>"test"</code> returns <code>TRUE</code> or <code>FALSE</code> indicating support of the feature.</p></li>
<li><p><code>"warn"</code> also returns a logical, but throws an informative warning when
<code>FALSE</code>.</p></li>
<li><p><code>"abort"</code> throws an error when the device is estimated to not support
the feature.</p></li>
</ul></dd>


<dt id="arg-op">op<a class="anchor" aria-label="anchor" href="#arg-op"></a></dt>
<dd><p>A string for a specific operation to test for when <code>feature</code> is
either <code>"blending"</code> or <code>"compositing"</code>. If <code>NULL</code> (default), support for
all known blending or compositing operations is queried.</p></dd>


<dt id="arg-maybe">maybe<a class="anchor" aria-label="anchor" href="#arg-maybe"></a></dt>
<dd><p>A logical of length 1 determining what the return value should
be in case the device capabilities cannot be assessed. When the current
device is the 'null device', <code>maybe</code> is returned.</p></dd>


<dt id="arg-call">call<a class="anchor" aria-label="anchor" href="#arg-call"></a></dt>
<dd><p>The execution environment of a currently running function, e.g.
<code><a href="https://rlang.r-lib.org/reference/stack.html" class="external-link">caller_env()</a></code>. The function will be mentioned in
warnings and error messages as the source of the warning or error. See
the <code>call</code> argument of <code><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">abort()</a></code> for more information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>TRUE</code> when the feature is thought to be supported and <code>FALSE</code>
otherwise.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The procedure for testing is as follows:</p><ul><li><p>First, the <span style="R">R</span> version is checked against the version wherein a feature was
introduced.</p></li>
<li><p>Next, the <a href="https://rdrr.io/r/grDevices/dev.capabilities.html" class="external-link">dev.capabilities()</a> function is
queried for support of the feature.</p></li>
<li><p>If that check is ambiguous, the <span class="pkg">svglite</span> and <span class="pkg">ragg</span> devices are
checked for known support.</p></li>
<li><p>Lastly, if there is no answer yet, it is checked whether the device is one
of the 'known' devices that supports a feature.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a></h2>


<dl><dt><code>"clippingPaths"</code></dt>
<dd><p>While most devices support rectangular clipping
regions, this feature is about the support for clipping to arbitrary paths.
It can be used to only display a part of a drawing.</p></dd>

<dt><code>"alpha_masks"</code></dt>
<dd><p>Like clipping regions and paths, alpha masks can also
be used to only display a part of a drawing. In particular a
semi-transparent mask can be used to display a drawing in the opaque parts
of the mask and hide a drawing in transparent part of a mask.</p></dd>

<dt><code>"lumi_masks</code></dt>
<dd><p>Similar to alpha masks, but using the mask's luminance
(greyscale value) to determine what is drawn. Light values are opaque and
dark values are transparent.</p></dd>

<dt><code>"compositing"</code></dt>
<dd><p>Compositing allows one to control how to drawings
are drawn in relation to one another. By default, one drawing is drawn
'over' the previous one, but other operators are possible, like 'clear',
'in' and 'out'.</p></dd>

<dt><code>"blending"</code></dt>
<dd><p>When placing one drawing atop of another, the blend
mode determines how the colours of the drawings relate to one another.</p></dd>

<dt><code>"transformations"</code></dt>
<dd><p>Performing an affine transformation on a group
can be used to translate, rotate, scale, shear and flip the drawing.</p></dd>

<dt><code>"gradients"</code></dt>
<dd><p>Gradients can be used to show a transition between
two or more colours as a fill in a drawing. The checks expects both linear
and radial gradients to be supported.</p></dd>

<dt><code>"patterns"</code></dt>
<dd><p>Patterns can be used to display a repeated, tiled
drawing as a fill in another drawing.</p></dd>

<dt><code>"paths"</code></dt>
<dd><p>Contrary to 'paths' as polyline or polygon drawings,
<code>"paths"</code> refers to the ability to fill and stroke collections of
drawings.</p></dd>

<dt><code>"glyphs"</code></dt>
<dd><p>Refers to the advanced typesetting feature for
controlling the appearance of individual glyphs.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a></h2>


<ul><li><p>On Windows machines, bitmap devices such as <code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">png()</a></code> or <code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">jpeg()</a></code> default
to <code>type = "windows"</code>. At the time of writing, these don't support any
new features, in contrast to <code>type = "cairo"</code>, which does. Prior to <span style="R">R</span>
version 4.2.0, the capabilities cannot be resolved and the value of the
<code>maybe</code> argument is returned.</p></li>
<li><p>With the exception of the <span class="pkg">ragg</span> and <span class="pkg">svglite</span> devices, if the
device doesn't report their capabilities via
<a href="https://rdrr.io/r/grDevices/dev.capabilities.html" class="external-link">dev.capabilities()</a>, or the <span style="R">R</span> version is
below 4.2.0, the <code>maybe</code> value is returned.</p></li>
<li><p>Even though patterns and gradients where introduced in <span style="R">R</span> 4.1.0, they
are considered unsupported because providing vectorised patterns and
gradients was only introduced later in <span style="R">R</span> 4.2.0.</p></li>
<li><p>When using the RStudio graphics device, the back end is assumed to be the
next device on the list. This assumption is typically met by default,
unless the device list is purposefully rearranged.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Typically you'd run `check_device()` inside a function that might produce</span></span></span>
<span class="r-in"><span><span class="co"># advanced graphics.</span></span></span>
<span class="r-in"><span><span class="co"># The check is designed for use in control flow statements in the test mode</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">check_device</span><span class="op">(</span><span class="st">"patterns"</span>, action <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Yay"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Nay"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Yay"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Automatically throw a warning when unavailable</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">check_device</span><span class="op">(</span><span class="st">"compositing"</span>, action <span class="op">=</span> <span class="st">"warn"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Yay"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Nay"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Yay"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Possibly throw an error</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">check_device</span><span class="op">(</span><span class="st">"glyphs"</span>, action <span class="op">=</span> <span class="st">"abort"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/wch" class="external-link">Winston Chang</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>, Kohske Takahashi, <a href="https://clauswilke.com" class="external-link">Claus Wilke</a>, <a href="https://karawoo.com" class="external-link">Kara Woo</a>, <a href="https://yutani.rbind.io" class="external-link">Hiroaki Yutani</a>, <a href="https://fishandwhistle.net" class="external-link">Dewey Dunnington</a>, Teun van den Brand, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

